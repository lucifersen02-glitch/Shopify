{% schema %}
{
  "name": "Product Main",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_zoom",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show vendor",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_sku",
      "label": "Show SKU",
      "default": false
    }
  ]
}
{% endschema %}

<section class="product-main">
  <div class="container">
    <div class="product-main__wrapper">
      <!-- Product Images - Flipkart Style -->
      <div class="product-main__images">
        <div class="product-images">
          {% if product.images.size > 1 %}
            <!-- Vertical Thumbnails -->
            <div class="product-images__thumbnails-vertical">
              {% for image in product.images %}
                <button 
                  class="product-images__thumbnail {% if forloop.first %}active{% endif %}"
                  data-image-index="{{ forloop.index0 }}"
                  aria-label="View product image {{ forloop.index }}"
                >
                  <img 
                    src="{{ image | image_url: width: 150 }}" 
                    srcset="{{ image | image_url: width: 150 }} 2x"
                    alt="{{ image.alt | escape }}"
                    loading="lazy"
                  >
                </button>
              {% endfor %}
            </div>
          {% endif %}

          <!-- Main Image -->
          {% if product.featured_image %}
            <div class="product-images__main-wrapper">
              <div class="product-images__main">
              <img 
                src="{{ product.featured_image | image_url: width: 1200 }}" 
                srcset="{{ product.featured_image | image_url: width: 600 }} 600w,
                        {{ product.featured_image | image_url: width: 900 }} 900w,
                        {{ product.featured_image | image_url: width: 1200 }} 1200w,
                        {{ product.featured_image | image_url: width: 1500 }} 1500w"
                sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 600px"
                alt="{{ product.featured_image.alt | escape }}"
                class="product-images__featured"
                id="ProductImage"
                loading="eager"
              >
              </div>
              
              <!-- Add to Cart & Buy Now Buttons Below Image -->
              <div class="product-images__actions">
                <button type="submit" form="product-form" class="button button--cart" id="AddToCartImage">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  ADD TO CART
                </button>
                <button type="button" class="button button--buy" onclick="document.getElementById('product-form').submit();">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  BUY NOW
                </button>
              </div>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Product Information -->
      <div class="product-main__info">
        <div class="product-info">
          {% if section.settings.show_vendor and product.vendor != blank %}
            <div class="product-info__vendor">
              <span>{{ product.vendor }}</span>
            </div>
          {% endif %}

          <h1 class="product-info__title">{{ product.title }}</h1>

          {% if section.settings.show_sku and product.selected_or_first_available_variant.sku != blank %}
            <div class="product-info__sku">
              <span class="product-info__sku-label">SKU:</span>
              <span class="product-info__sku-value">{{ product.selected_or_first_available_variant.sku }}</span>
            </div>
          {% endif %}

          <div class="product-info__rating">
            <div class="product-rating">
              <span class="product-rating__score">4.5</span>
              <div class="product-rating__stars">
                {% for i in (1..5) %}
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="{% if i <= 4 %}currentColor{% else %}none{% endif %}" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                  </svg>
                {% endfor %}
              </div>
              <span class="product-rating__text">4,225 Ratings & 226 Reviews</span>
            </div>
          </div>

          <div class="product-info__price">
            <div class="product-price__offer">Extra ₹5000 off</div>
            <div class="product-price">
              <span class="product-price__current">{{ product.selected_or_first_available_variant.price | money }}</span>
              {% if product.selected_or_first_available_variant.compare_at_price > product.selected_or_first_available_variant.price %}
                <span class="product-price__compare">{{ product.selected_or_first_available_variant.compare_at_price | money }}</span>
                <span class="product-price__discount">
                  {{ product.selected_or_first_available_variant.compare_at_price | minus: product.selected_or_first_available_variant.price | times: 100.0 | divided_by: product.selected_or_first_available_variant.compare_at_price | round }}% off
                </span>
              {% endif %}
            </div>
            <div class="product-price__info">
              <span>+ ₹156 Protect Promise Fee</span>
              <a href="#" class="product-price__learn-more">Learn more</a>
            </div>
            <div class="product-delivery">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>Secure delivery by 29 Jan, Thursday</span>
            </div>
          </div>

          <!-- Offers Section -->
          <div class="product-offers">
            <div class="product-offers__title">Available offers</div>
            <div class="product-offers__list">
              <div class="product-offer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 11L12 14L22 4" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="#388e3c" stroke-width="2"/>
                </svg>
                <span>Bank Offer 5% cashback on Axis Bank Flipkart Debit Card up to ₹750 <a href="#">T&C</a></span>
              </div>
              <div class="product-offer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 11L12 14L22 4" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="#388e3c" stroke-width="2"/>
                </svg>
                <span>Special Price Get extra ₹5000 off <a href="#">T&C</a></span>
              </div>
              <div class="product-offer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 11L12 14L22 4" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="#388e3c" stroke-width="2"/>
                </svg>
                <span>Free Shipping on orders over ₹50</span>
              </div>
              <a href="#" class="product-offers__more">View 9 more offers</a>
            </div>
          </div>

          <!-- Highlights Section -->
          <div class="product-highlights">
            <div class="product-highlights__title">Highlights</div>
            <div class="product-highlights__list">
              <div class="product-highlight">Premium Quality Materials</div>
              <div class="product-highlight">Easy DIY Installation</div>
              <div class="product-highlight">Removable Without Damage</div>
              <div class="product-highlight">Modern Geometric Design</div>
            </div>
          </div>

          <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" class="product-form" id="product-form">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" id="product-variant-id">

            {% unless product.has_only_default_variant %}
              <div class="product-form__variants">
                {% for option in product.options_with_values %}
                  <div class="product-form__option">
                    <label class="product-form__option-label">{{ option.name }}</label>
                    <div class="product-form__option-values">
                      {% for value in option.values %}
                        <button
                          type="button"
                          class="product-form__option-value {% if option.selected_value == value %}active{% endif %}"
                          data-option="{{ option.name }}"
                          data-value="{{ value }}"
                        >
                          {{ value }}
                        </button>
                      {% endfor %}
                    </div>
                  </div>
                {% endfor %}
              </div>
            {% endunless %}

            <div class="product-form__quantity">
              <label for="Quantity" class="product-form__quantity-label">Quantity</label>
              <div class="product-form__quantity-controls">
                <button type="button" class="product-form__quantity-btn" data-action="decrease" aria-label="Decrease quantity">-</button>
                <input 
                  type="number" 
                  id="Quantity" 
                  name="quantity" 
                  value="1" 
                  min="1" 
                  class="product-form__quantity-input"
                >
                <button type="button" class="product-form__quantity-btn" data-action="increase" aria-label="Increase quantity">+</button>
              </div>
            </div>

            <!-- Delivery Section -->
            <div class="product-delivery-section">
              <div class="product-delivery__title">Delivery</div>
              <div class="product-delivery__input-group">
                <input type="text" placeholder="Enter Delivery Pincode" class="product-delivery__input" maxlength="6">
                <button type="button" class="product-delivery__check">Check</button>
              </div>
              <div class="product-delivery__info">
                <div class="product-delivery__date">Delivery by <strong>29 Jan, Thursday</strong></div>
                <div class="product-delivery__note">if ordered before 8:29 PM</div>
              </div>
            </div>

            <div class="product-form__actions">
              <button 
                type="submit" 
                name="add" 
                class="button button--primary product-form__submit"
                id="AddToCart"
                {% unless product.selected_or_first_available_variant.available %}disabled{% endunless %}
              >
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-width="2"/>
                  <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-width="2"/>
                  <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>
                  {% if product.selected_or_first_available_variant.available %}
                    ADD TO CART
                  {% else %}
                    Sold Out
                  {% endif %}
                </span>
              </button>
              <button type="button" class="button button--buy-now" onclick="document.getElementById('product-form').submit();">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                BUY NOW
              </button>
            </div>

            {% unless product.selected_or_first_available_variant.available %}
              <p class="product-form__sold-out">This product is currently sold out.</p>
            {% endunless %}
          </form>

          <div class="product-info__features">
            <div class="product-features-list">
              <div class="product-features-list__item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Free Shipping on orders over $50</span>
              </div>
              <div class="product-features-list__item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>30-Day Return Policy</span>
              </div>
              <div class="product-features-list__item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Premium Quality Guaranteed</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
